<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - Crash Predictor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1a1a1a;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    h2 { margin-bottom: 20px; color: #f0d14a; }
    input {
      padding: 8px;
      width: 120px;
      border-radius: 5px;
      border: none;
      margin: 5px;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin: 5px;
      transition: 0.2s;
    }
    button:hover { opacity: 0.8; }
    .add { background: #4caf50; color: #fff; }
    .save { background: #2196f3; color: #fff; }
    .clear { background: #e53935; color: #fff; }
    ul {
      margin-top: 20px;
      padding: 0;
      list-style: none;
      text-align: left;
      display: inline-block;
      min-width: 300px;
    }
    li {
      background: #2a2a2a;
      margin: 5px 0;
      padding: 10px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h2>Crash Predictor - Admin Panel</h2>

  <input id="val" type="number" step="0.01" placeholder="Value">
  <input id="sec" type="number" placeholder="Seconds">
  <button class="add" onclick="addRow()">Qo‘shish</button>
  <br>
  <button class="save" onclick="startOn()">Start ON</button>
  <button class="clear" onclick="clearAll()">Clear</button>

  <ul id="list"></ul>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    // Firebase sozlamalari
    const firebaseConfig = {
      apiKey: "AIzaSyB1_XCbC777hKwxlilhMeq5Hpty1dvDT1I",
      authDomain: "giper-8fd92.firebaseapp.com",
      databaseURL: "https://giper-8fd92-default-rtdb.firebaseio.com",
      projectId: "giper-8fd92",
      storageBucket: "giper-8fd92.appspot.com",
      messagingSenderId: "485740337398",
      appId: "1:485740337398:web:demo"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let arr = [];

    function addRow(){
      const val = parseFloat(document.getElementById("val").value);
      const sec = parseInt(document.getElementById("sec").value);
      if(isNaN(val) || isNaN(sec)){ alert("Qiymat va sekundni kiriting!"); return; }
      arr.push({ value: val, seconds: sec });
      renderList();
      document.getElementById("val").value="";
      document.getElementById("sec").value="";
    }

    function renderList(){
      const ul = document.getElementById("list");
      ul.innerHTML = "";
      arr.forEach((item,i)=>{
        const li=document.createElement("li");
        li.textContent = (i+1)+") " + item.value + "x - " + item.seconds + "s";
        ul.appendChild(li);
      });
    }

    function startOn(){
      if(arr.length === 0){ alert("Avval ma’lumot qo‘shing!"); return; }
      db.ref("predictorvalue").set(arr)
        .then(()=> alert("Firebasega yozildi ✅"))
        .catch(err=> alert("Xatolik: " + err));
    }

    function clearAll(){
      db.ref("predictorvalue").remove()
        .then(()=> alert("Firebase tozalandi ❌"))
        .catch(err=> alert("Xatolik: " + err));
      arr = [];
      renderList();
    }
  </script>
</body>
</html>
